---
title: 'Pytest Notes'
date: '2023-03-17'
tags: ['react', 'nextjs', 'tailwindcss', 'mdx']
---
[Pytest tutorial youtube]("https://www.youtube.com/watch?v=cHYq1MRoyI0&ab_channel=freeCodeCamp.org")

### What is pytest?
- Testing framework for python
- Auto-discovery of tests
- Rich assertion introspection 
- Support parametrized and fixutre-based testing

### Why pytest?
- Simplified Syntax
- Rich Assertion Introspection
- Powerful Fixture System
- Compitability
- Extensibility

### Installation
- `pip install pytest`

### Commands:
`pytest -k "name"` *run tests that match the "name"*  
`pytest -k "name and not (this or other)` *run tests that match the "name" and not this or other*  
`pytest -m "name"` *run tests with marker*  
`pytest -m "name and not (this or other)` *run tests with marker and not this or other*  
`pytest -m "name and othername"` *run tests that have both markers*  
`pytest -m "name or othername"` *run tests that have either markers*  
`pytest -m "(name or othername) and not (thirdname)"` *run tests that have either markers but not thirdname*  
`pytest "test_file.py::test_func[1-2]"` *run test_func with paramiter 1 and 2 only*  
- It is really good idea to use quotes when selecting tests with paramiters as it never conficts with the shell
`pytest --durations=0` *show the time it took to run each test*  
`pytest --tb=no` *no traceback, or options like `short`, `line`, `no-locals`*  
`pytest --maxfail=2` *stop after 2 failures*  
`pytest --fixtures -v` *list all the fixtures*  
`pytest --fixtures-per-test (test_file.py::test_method)` *list all the fixtures per test*  
`pytest -s` == `pytest --capture=no` *print statments print only when we use -s*
`pytest --setup-show` *show fixture setup*  
`pytest --lf` *run last failed*  
`pytest --ff` *run first failed*  
`pytest`  
`pytest filename.py`  
`pytest foldername/`  
`pytest -s` *print statments print only when we use -s*  
`pytest -v -rxs` *verbose, report, exit on first failure*  
`pytest -v` *verbose*  
`pytest -vv` *more verbose*  
`pytest --collect-only` *list all the tests*  
`pytest -m "name"` *run tests with marker*  
`pytest "test_file.py::test_method"` *run specific test*  
`pytest -x` *stop after first failure*  



### Methods:
`setup_method(self, method)` *runs before every method*  
`teardown_method(self, method)` *runs after every method*


### Example of pytest paramiterization with fixtures
```python
import pytest

# Define a fixture that provides different test data.
@pytest.fixture(params=[1, 2, 3])
def test_data(request):
    return request.param

# Use the fixture in a test function.
def test_square(test_data):
    assert (test_data ** 2) % 2 == 0
```
