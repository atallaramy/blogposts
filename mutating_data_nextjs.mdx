---
title: 'Mutating data in Next.js'
date: '2023-09-28'
tags: ['final project', 'react', 'nextjs', 'tailwindcss', 'mdx']
---

# Mutating data in Next.js
This comes from lesson 11 of Dave Gray course on Next.js

In a `fetch` function if you use `cache: 'no-store`, it means you want to see immediate updates on your page. And also you can do it using route sigma config, by setting `revalidate = 0` 

When using revalidate you will see updates immediately, as long as we are on the same page. But if we go to another route we see no chages. This is because the `router.refresh()` applies only to the current route (page).

https://nextjs.org/docs/app/building-your-application/data-fetching/forms-and-mutations
<br />The documentation says use `router.refresh()` to refresh the **current route**.
The `push()` and `replace()` methods will perform a **soft navigation** if the route has been prefetched, does not include dynamic segmants or has the same dynamic parameters as the current route.<br />
<div>Hard Navigation: <p style={{ fontWeight: `lighter` }}>On navigation the cache is invalidated and the server refetches data and re-renders the changed segments.</p></div>
<div>Soft Navigation: <p style={{ fontWeight: `lighter` }}>On navigation, the cache for changed segments is reused (if it exists), and no new requests are made to the server for data.</p></div>

**Client site cache is as importand as the server components**
While setting links not to be prefetched can be a solution but you may not want to do that with every link in you application.<br />
The Solution: is to set it when createing the links. (while looping.)<br />
No this was not a solution. It does not work when using the `back button`
**psugihara** from nextjs team say `router.refresh()` not invalidates the entire router cache. (use canary realease at the time of this post.)<br />
Now with the canary we can just try the application. and we do not have prefetch == false any more. 